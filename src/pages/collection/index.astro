---
import Base from "../../layouts/Base.astro";
import { getCollection } from "astro:content";

// Calm, predictable ordering
const products = (await getCollection("products")).sort((a, b) =>
  a.data.title.localeCompare(b.data.title)
);
---
<Base title="Collection â€“ Bottega Marchi">
  <main class="page">
    <section class="max-w-[1200px] mx-auto px-6 sm:px-8 md:px-10 lg:px-12">
      <!-- Intro copy above the gallery -->
      <p class="quiet text-sm sm:text-[15px] leading-relaxed mb-8 sm:mb-10 max-w-prose">
        Find available pieces here in the shop or through my stockists.<br />
        For commissions or to enquire about a piece that is no longer in stock,
        please contact me or the stockist to arrange a bespoke order.
      </p>

      <!-- Grid: tidy grouping like your screenshot -->
      <ul class="grid gap-y-14 gap-x-8 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 lg:gap-x-12">
        {products.map((p) => (
          <li class="group">
            <a href={`/collection/${p.data.slug}`} class="block">
              <!-- Tall, consistent tiles; slight crop for a neat magazine look -->
              <div class="overflow-hidden rounded-xl">
                <div class="w-full aspect-[4/5]">
                  <img
                    src={p.data.cover}
                    alt={p.data.title}
                    class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-[1.02]"
                    loading="lazy"
                  />
                </div>
              </div>

              <!-- Only the series name, with comfortable margins -->
              <p class="mt-4 text-sm leading-tight px-1 sm:px-2">
                {p.data.title}
              </p>
            </a>
          </li>
        ))}
      </ul>
    </section>
  </main>
</Base>
