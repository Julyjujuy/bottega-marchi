---
import Base from "../../layouts/Base.astro";
import { getCollection } from "astro:content";

// read the 3 series entries from src/content/series/*.json
const allSeries = (await getCollection("series"))
  .sort((a,b) => (a.data.order ?? 999) - (b.data.order ?? 999) || a.data.title.localeCompare(b.data.title));
---
<Base title="Series â€“ Bottega Marchi">
  <main class="page">
    <section class="max-w-[1200px] mx-auto px-6 sm:px-8 md:px-10 lg:px-12">
      

      <ul class="grid gap-y-14 gap-x-8 sm:grid-cols-2 md:grid-cols-3 lg:gap-x-12">
        {allSeries.map(({ data }) => (
          <li class="group">
            <a href={`/series/${data.slug}`} class="block">
              <div class="overflow-hidden rounded-xl">
                <div class="w-full aspect-[4/5]">
                  <img
                    src={data.cover ?? "/images/Homepage_image.jpg"}
                    alt={data.title}
                    class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-[1.02]"
                    loading="lazy"
                  />
                </div>
              </div>
              <p class="mt-4 text-sm leading-tight px-1 sm:px-2">{data.title}</p>
            </a>
          </li>
        ))}
      </ul>
    </section>
  </main>
</Base>
